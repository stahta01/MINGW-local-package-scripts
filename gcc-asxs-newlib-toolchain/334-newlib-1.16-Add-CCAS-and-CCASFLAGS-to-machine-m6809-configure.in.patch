From bfcce33622ed3a337e9bf93adca7fe9cb259c2c5 Mon Sep 17 00:00:00 2001
From: Tim S <tim.stahlhut@gmail.com>
Date: Tue, 22 Jan 2019 17:41:21 -0500
Subject: [PATCH 30/37] Add CCAS and CCASFLAGS to machine/m6809/configure.in

---
 newlib/libc/machine/m6809/configure    | 11 +++++++++--
 newlib/libc/machine/m6809/configure.in |  7 +++++++
 2 files changed, 16 insertions(+), 2 deletions(-)

diff --git a/newlib/libc/machine/m6809/configure b/newlib/libc/machine/m6809/configure
index 84b3848..5c7b90f 100755
--- a/newlib/libc/machine/m6809/configure
+++ b/newlib/libc/machine/m6809/configure
@@ -605,8 +605,6 @@ ELIX_LEVEL_0_FALSE
 ELIX_LEVEL_0_TRUE
 LDFLAGS
 NEWLIB_CFLAGS
-CCASFLAGS
-CCAS
 MAINT
 MAINTAINER_MODE_FALSE
 MAINTAINER_MODE_TRUE
@@ -656,6 +654,8 @@ build
 newlib_basedir
 MAY_SUPPLY_SYSCALLS_FALSE
 MAY_SUPPLY_SYSCALLS_TRUE
+CCASFLAGS
+CCAS
 target_alias
 host_alias
 build_alias
@@ -1819,6 +1819,13 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
 
+# Newlib uses CCAS and CCASFLAGS; so, define them.
+: ${CCAS='$(CC)'}
+: ${CCASFLAGS='$(CFLAGS)'}
+
+
+
+
 ac_aux_dir=
 for ac_dir in ../../../.. "$srcdir"/../../../..; do
   if test -f "$ac_dir/install-sh"; then
diff --git a/newlib/libc/machine/m6809/configure.in b/newlib/libc/machine/m6809/configure.in
index 7842c2d..017ab3d 100644
--- a/newlib/libc/machine/m6809/configure.in
+++ b/newlib/libc/machine/m6809/configure.in
@@ -5,6 +5,13 @@ AC_PREREQ(2.59)
 AC_INIT([newlib],[NEWLIB_VERSION])
 AC_CONFIG_SRCDIR([setjmp.S])
 
+# Newer automakes demand CCAS and CCASFLAGS.
+: ${CCAS='$(CC)'}
+: ${CCASFLAGS='$(CFLAGS)'}
+AC_SUBST(CCAS)
+AC_SUBST(CCASFLAGS)
+
+
 dnl Can't be done in NEWLIB_CONFIGURE because that confuses automake. 
 AC_CONFIG_AUX_DIR(../../../..)
 
-- 
2.19.1.windows.1

